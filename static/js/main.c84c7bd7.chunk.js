(this["webpackJsonpperpustakaan-crud"]=this["webpackJsonpperpustakaan-crud"]||[]).push([[0],{123:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),c=t(8),l=t.n(c),u=(t(95),t(25)),i=(t(96),t(32)),o=t(74),m=t(26),s=t(6),d=t(23),b=t.n(d),p=function(e){var a="https://l200180151-perpustakaan-api.herokuapp.com/"+e;return{fetchall:function(){return b.a.get(a)},create:function(e){return b.a.post("".concat(a,"/add"),e)},update:function(e,t){return b.a.put("".concat(a,"/update?id=").concat(e),t)},delete:function(e){return b.a.delete("".concat(a,"/delete?id=").concat(e))}}},f="MEMBER_LOADING",g="MEMBER_CREATE",E="MEMBER_UPDATE",h="MEMBER_DELETE",j="MEMBER_FETCH_ALL",O={loading:!1,list:[]},k="BUKU_LOADING",v="BUKU_CREATE",y="BUKU_UPDATE",_="BUKU_DELETE",T="BUKU_FETCH_ALL",M={loading:!1,list:[]},N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"https://l200180151-perpustakaan-api.herokuapp.com/peminjaman";return{fetchall:function(){return b.a.get(e)},create:function(a){return b.a.post("".concat(e,"/add?id=").concat(a))},update:function(a){return b.a.put("".concat(e,"/update?id=").concat(a))},delete:function(a){return b.a.delete("".concat(e,"/delete?id=").concat(a))}}},R="PEMINJAMAN_LOADING",B="PEMINJAMAN_CREATE",C="PEMINJAMAN_UPDATE",L="PEMINJAMAN_DELETE",A="PEMINJAMAN_FETCH_ALL",P={loading:!1,list:[]},x=Object(i.c)({membersRequest:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(a.type){case f:return Object(s.a)(Object(s.a)({},e),{},{loading:!0});case j:return Object(s.a)(Object(s.a)({},e),{},{list:Object(m.a)(a.payload),loading:!1});case g:return Object(s.a)(Object(s.a)({},e),{},{list:[].concat(Object(m.a)(e.list),[a.payload])});case E:return Object(s.a)(Object(s.a)({},e),{},{list:e.list.map((function(e){return e.id_member===a.payload.id_member?a.payload:e}))});case h:return Object(s.a)(Object(s.a)({},e),{},{list:e.list.filter((function(e){return e.id_member!==a.payload}))});default:return e}},bukuRequest:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(a.type){case k:return Object(s.a)(Object(s.a)({},e),{},{loading:!0});case T:return Object(s.a)(Object(s.a)({},e),{},{list:Object(m.a)(a.payload),loading:!1});case v:return Object(s.a)(Object(s.a)({},e),{},{list:[].concat(Object(m.a)(e.list),[a.payload])});case y:return Object(s.a)(Object(s.a)({},e),{},{list:e.list.map((function(e){return e.id_buku===a.payload.id_buku?a.payload:e}))});case _:return Object(s.a)(Object(s.a)({},e),{},{list:e.list.filter((function(e){return e.id_buku!==a.payload}))});default:return e}},peminjamanRequest:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(a.type){case R:return Object(s.a)(Object(s.a)({},e),{},{loading:!0});case A:return Object(s.a)(Object(s.a)({},e),{},{list:Object(m.a)(a.payload),loading:!1});case B:return Object(s.a)(Object(s.a)({},e),{},{list:[].concat(Object(m.a)(e.list),[a.payload])});case C:return Object(s.a)(Object(s.a)({},e),{},{list:e.list.map((function(e){return e.id_peminjaman===a.payload.id_peminjaman?a.payload:e}))});case L:return Object(s.a)(Object(s.a)({},e),{},{list:e.list.filter((function(e){return e.id_peminjaman!==a.payload}))});default:return e}}}),I=Object(i.e)(x,Object(i.d)(Object(i.a)(o.a))),w=t(20),S=t(22),U=t(125),D=t(151),q=t(154),J=t(155),W=t(156),F=t(157),H=t(172),G=t(158),K=t(159),V=t(126),z=t(4),$=t(160),Q=t(161),X=t(168),Y=t(51),Z=function(e,a,t){var r=Object(n.useState)(e),c=Object(u.a)(r,2),l=c[0],i=c[1],o=Object(n.useState)({}),m=Object(u.a)(o,2),d=m[0],b=m[1];return{values:l,setValues:i,handleInputChange:function(e){var t=e.target,n=t.name,r=t.value,c=Object(Y.a)({},n,r);i(Object(s.a)(Object(s.a)({},l),c)),a(c)},errors:d,setErrors:b,resetForm:function(){i(Object(s.a)({},e)),b({}),t(0)}}},ee=t(19),ae={nama:"",alamat:"",no_hp:""},te={createNewMember:function(e,a,t){return function(n){p("member").create(e).then((function(e){n({type:g,payload:e.data}),a()})).catch((function(e){return t()}))}},updateMemberRecord:function(e,a,t,n){return function(r){p("member").update(e,a).then((function(n){r({type:E,payload:Object(s.a)({id_member:e},a)}),t()})).catch((function(e){return n()}))}}},ne=Object(w.b)((function(e){return{membersList:e.membersRequest.list}}),te)(Object(z.a)((function(e){return{root:{"& .MuiTextField-root":{marginBottom:e.spacing(3),marginRight:e.spacing(3)}},buttonMargin:{margin:e.spacing(1)}}}))((function(e){var a=e.classes,t=Object(S.a)(e,["classes"]),c=Object(ee.useToasts)().addToast,l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,a=Object(s.a)({},d);if("nama"in e&&(a.nama=e.nama?"":"Tidak boleh kosong"),"alamat"in e&&(a.alamat=e.alamat?"":"Tidak boleh kosong"),"no_hp"in e&&(a.no_hp=e.no_hp?"":"Tidak boleh kosong"),b(Object(s.a)({},a)),e===i)return Object.values(a).every((function(e){return""===e}))},u=Z(ae,l,t.setCurrentId),i=u.values,o=u.setValues,m=u.handleInputChange,d=u.errors,b=u.setErrors,p=u.resetForm;return Object(n.useEffect)((function(){0!==t.currentId&&(o(Object(s.a)({},t.membersList.find((function(e){return e.id_member===t.currentId})))),b({}))}),[t.currentId]),r.a.createElement("form",{autoComplete:"off",noValidate:!0,className:a.root,onSubmit:function(e){e.preventDefault(),l()&&(0===t.currentId?t.createNewMember(i,(function(){p(),c("Berhasil membuat member baru",{appearance:"success"})}),(function(){c("Gagal membuat member baru",{appearance:"error"})})):t.updateMemberRecord(t.currentId,i,(function(){p(),c("Berhasil mengupdate member",{appearance:"success"})}),(function(){c("Gagal mengupdate member",{appearance:"error"})})))}},r.a.createElement(D.a,{container:!0},r.a.createElement(D.a,{item:!0,xs:12},r.a.createElement(X.a,Object.assign({name:"nama",variant:"outlined",label:"Nama",value:i.nama,onChange:m,fullWidth:!0,inputProps:{maxLength:45}},d.nama&&{error:!0,helperText:d.nama})),r.a.createElement(X.a,Object.assign({name:"alamat",variant:"outlined",label:"Alamat",value:i.alamat,onChange:m,fullWidth:!0,inputProps:{maxLength:45}},d.alamat&&{error:!0,helperText:d.alamat})),r.a.createElement(X.a,Object.assign({name:"no_hp",variant:"outlined",label:"No HP",type:"number",value:i.no_hp,onChange:m,fullWidth:!0,inputProps:{maxLength:12}},d.no_hp&&{error:!0,helperText:d.no_hp})),r.a.createElement("div",null,r.a.createElement(V.a,{variant:"contained",color:"primary",type:"submit",className:a.buttonMargin},"Submit"),r.a.createElement(V.a,{variant:"contained",className:a.buttonMargin,onClick:p},"Reset")))))}))),re={fetchAllMembers:function(){return function(e){e({type:f}),p("member").fetchall().then((function(a){e({type:j,payload:a.data})})).catch((function(e){return console.log(e)}))}},deleteMemberRecord:function(e,a){return function(t){p("member").delete(e).then((function(n){t({type:h,payload:e}),a()})).catch((function(e){return console.log(e)}))}}},ce=Object(w.b)((function(e){return{membersList:e.membersRequest.list,isLoading:e.membersRequest.loading}}),re)(Object(z.a)((function(e){return{root:{"& .MuiTableCell-head":{fontSize:"1.25rem"}},paper:{margin:e.spacing(4),padding:e.spacing(4)},loading:{margin:"auto"}}}))((function(e){var a=e.classes,t=Object(S.a)(e,["classes"]),c=Object(ee.useToasts)().addToast,l=Object(n.useState)(0),i=Object(u.a)(l,2),o=i[0],m=i[1];Object(n.useEffect)((function(){t.fetchAllMembers()}),[]);return r.a.createElement(U.a,{className:a.paper,elevation:3},r.a.createElement(D.a,{container:!0},r.a.createElement(D.a,{item:!0,xs:6},r.a.createElement(ne,{currentId:o,setCurrentId:m})),t.isLoading?r.a.createElement(q.a,{className:a.loading}):r.a.createElement(D.a,{item:!0,xs:6},r.a.createElement(J.a,null,r.a.createElement(W.a,{className:a.root},r.a.createElement(F.a,null,r.a.createElement(H.a,null,"Nama"),r.a.createElement(H.a,null,"Alamat"),r.a.createElement(H.a,null,"No HP"),r.a.createElement(H.a,null))),r.a.createElement(G.a,null,t.membersList.map((function(e){return r.a.createElement(F.a,{key:e.id_member,hover:!0},r.a.createElement(H.a,null,e.nama),r.a.createElement(H.a,null,e.alamat),r.a.createElement(H.a,null,e.no_hp),r.a.createElement(H.a,null,r.a.createElement(K.a,{variant:"text"},r.a.createElement(V.a,null,r.a.createElement($.a,{color:"primary",onClick:function(){m(e.id_member)}})),r.a.createElement(V.a,null,r.a.createElement(Q.a,{color:"secondary",onClick:function(){var a;a=e.id_member,window.confirm("Hapus member?")&&t.deleteMemberRecord(a,(function(){c("Berhasil menghapus member",{appearance:"info"})}))}})))))})))))))}))),le={judul:"",pengarang:"",tahun_terbit:""},ue={createNewBuku:function(e,a,t){return function(n){p("buku").create(e).then((function(e){n({type:v,payload:e.data}),a()})).catch((function(e){return t()}))}},updateBukuRecord:function(e,a,t,n){return function(r){p("buku").update(e,a).then((function(n){r({type:y,payload:Object(s.a)({id_buku:e},a)}),t()})).catch((function(e){return n()}))}}},ie=Object(w.b)((function(e){return{bukuList:e.bukuRequest.list}}),ue)(Object(z.a)((function(e){return{root:{"& .MuiTextField-root":{marginBottom:e.spacing(3),marginRight:e.spacing(3)}},buttonMargin:{margin:e.spacing(1)}}}))((function(e){var a=e.classes,t=Object(S.a)(e,["classes"]),c=Object(ee.useToasts)().addToast,l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,a=Object(s.a)({},d);if("judul"in e&&(a.judul=e.judul?"":"Tidak boleh kosong"),"pengarang"in e&&(a.pengarang=e.pengarang?"":"Tidak boleh kosong"),"tahun_terbit"in e&&(a.tahun_terbit=e.tahun_terbit?"":"Tidak boleh kosong"),b(Object(s.a)({},a)),e===i)return Object.values(a).every((function(e){return""===e}))},u=Z(le,l,t.setCurrentId),i=u.values,o=u.setValues,m=u.handleInputChange,d=u.errors,b=u.setErrors,p=u.resetForm;return Object(n.useEffect)((function(){0!==t.currentId&&(o(Object(s.a)({},t.bukuList.find((function(e){return e.id_buku===t.currentId})))),b({}))}),[t.currentId]),r.a.createElement("form",{autoComplete:"off",noValidate:!0,className:a.root,onSubmit:function(e){e.preventDefault(),l()&&(0===t.currentId?t.createNewBuku(i,(function(){p(),c("Berhasil membuat buku baru",{appearance:"success"})}),(function(){c("Gagal membuat buku baru",{appearance:"error"})})):t.updateBukuRecord(t.currentId,i,(function(){p(),c("Berhasil mengupdate buku",{appearance:"success"})}),(function(){c("Gagal mengupdate buku",{appearance:"error"})})))}},r.a.createElement(D.a,{container:!0},r.a.createElement(D.a,{item:!0,xs:12},r.a.createElement(X.a,Object.assign({name:"judul",variant:"outlined",label:"Judul",value:i.judul,onChange:m,fullWidth:!0,inputProps:{maxLength:45}},d.judul&&{error:!0,helperText:d.judul})),r.a.createElement(X.a,Object.assign({name:"pengarang",variant:"outlined",label:"Pengarang",value:i.pengarang,onChange:m,fullWidth:!0,inputProps:{maxLength:45}},d.pengarang&&{error:!0,helperText:d.pengarang})),r.a.createElement(X.a,Object.assign({name:"tahun_terbit",variant:"outlined",label:"Tahun Terbit",type:"number",value:i.tahun_terbit,onChange:m,fullWidth:!0},d.tahun_terbit&&{error:!0,helperText:d.tahun_terbit})),r.a.createElement("div",null,r.a.createElement(V.a,{variant:"contained",color:"primary",type:"submit",className:a.buttonMargin},"Submit"),r.a.createElement(V.a,{variant:"contained",className:a.buttonMargin,onClick:p},"Reset")))))}))),oe=t(162),me={fetchAllBuku:function(){return function(e){e({type:k}),p("buku").fetchall().then((function(a){e({type:T,payload:a.data})})).catch((function(e){return console.log(e)}))}},deleteBukuRecord:function(e,a){return function(t){p("buku").delete(e).then((function(n){t({type:_,payload:e}),a()})).catch((function(e){return console.log(e)}))}},createNewPeminjaman:function(e,a){return function(t){N().create(e).then((function(e){t({type:B,payload:e.data}),a()})).catch((function(e){return console.log(e)}))}}},se=Object(w.b)((function(e){return{bukuList:e.bukuRequest.list,isLoading:e.bukuRequest.loading}}),me)(Object(z.a)((function(e){return{root:{"& .MuiTableCell-head":{fontSize:"1.25rem"}},paper:{margin:e.spacing(4),padding:e.spacing(4)},loading:{margin:"auto"}}}))((function(e){var a=e.classes,t=Object(S.a)(e,["classes"]),c=Object(ee.useToasts)().addToast,l=Object(n.useState)(0),i=Object(u.a)(l,2),o=i[0],m=i[1];Object(n.useEffect)((function(){t.fetchAllBuku()}),[]);return r.a.createElement(U.a,{className:a.paper,elevation:3},r.a.createElement(D.a,{container:!0},r.a.createElement(D.a,{item:!0,xs:6},r.a.createElement(ie,{currentId:o,setCurrentId:m})),t.isLoading?r.a.createElement(q.a,{className:a.loading}):r.a.createElement(D.a,{item:!0,xs:6},r.a.createElement(J.a,null,r.a.createElement(W.a,{className:a.root},r.a.createElement(F.a,null,r.a.createElement(H.a,null,"Judul"),r.a.createElement(H.a,null,"Pengarang"),r.a.createElement(H.a,null,"Tahun Terbit"),r.a.createElement(H.a,null))),r.a.createElement(G.a,null,t.bukuList.map((function(e){return r.a.createElement(F.a,{key:e.id_buku,hover:!0},r.a.createElement(H.a,null,e.judul),r.a.createElement(H.a,null,e.pengarang),r.a.createElement(H.a,null,e.tahun_terbit),r.a.createElement(H.a,null,r.a.createElement(K.a,{variant:"text"},r.a.createElement(V.a,null,r.a.createElement(oe.a,{color:"action",onClick:function(){var a;a=e.id_buku,window.confirm("pinjam buku?")&&t.createNewPeminjaman(a,(function(){c("Berhasil meminjam buku",{appearance:"success"})}))}})),r.a.createElement(V.a,null,r.a.createElement($.a,{color:"primary",onClick:function(){m(e.id_buku)}})),r.a.createElement(V.a,null,r.a.createElement(Q.a,{color:"secondary",onClick:function(){var a;a=e.id_buku,window.confirm("Hapus buku?")&&t.deleteBukuRecord(a,(function(){c("Berhasil menghapus buku",{appearance:"info"})}))}})))))})))))))}))),de=t(163),be={fetchAllPeminjaman:function(){return function(e){e({type:R}),N().fetchall().then((function(a){e({type:A,payload:a.data})})).catch((function(e){return console.log(e)}))}},deletePeminjamanRecord:function(e,a){return function(t){N().delete(e).then((function(n){t({type:L,payload:e}),a()})).catch((function(e){return console.log(e)}))}},updatePeminjamanRecord:function(e,a){return function(t){N().update(e).then((function(e){t({type:C,payload:e.data}),a()})).catch((function(e){return console.log(e)}))}}},pe=Object(w.b)((function(e){return{peminjamanList:e.peminjamanRequest.list,isLoading:e.peminjamanRequest.loading}}),be)(Object(z.a)((function(e){return{root:{"& .MuiTableCell-head":{fontSize:"1.25rem"}},paper:{margin:e.spacing(4),padding:e.spacing(4)},form:{marginLeft:"8%"},loading:{margin:"auto"}}}))((function(e){var a=e.classes,t=Object(S.a)(e,["classes"]),c=Object(ee.useToasts)().addToast;Object(n.useEffect)((function(){t.fetchAllPeminjaman()}),[]);return r.a.createElement(U.a,{className:a.paper,elevation:3},r.a.createElement(D.a,{container:!0},t.isLoading?r.a.createElement(q.a,{className:a.loading}):r.a.createElement(D.a,{className:a.form,item:!0,lg:12},r.a.createElement(J.a,null,r.a.createElement(W.a,{className:a.root},r.a.createElement(F.a,null,r.a.createElement(H.a,null,"Nama Peminjam"),r.a.createElement(H.a,null,"Buku"),r.a.createElement(H.a,null,"Tanggal Peminjaman"),r.a.createElement(H.a,null,"Tanggal Pengembalian"),r.a.createElement(H.a,null))),r.a.createElement(G.a,null,t.peminjamanList.map((function(e){return r.a.createElement(F.a,{key:e.id_peminjaman,hover:!0},r.a.createElement(H.a,null,e.nama),r.a.createElement(H.a,null,e.judul),r.a.createElement(H.a,null,e.tanggal_peminjaman),r.a.createElement(H.a,null,null===e.tanggal_pengembalian?"Belum dikembalikan":e.tanggal_pengembalian),r.a.createElement(H.a,null,r.a.createElement(K.a,{variant:"text"},r.a.createElement(V.a,null,r.a.createElement(de.a,{color:"primary",onClick:function(){var a;a=e.id_peminjaman,window.confirm("Kembalikan buku?")&&t.updatePeminjamanRecord(a,(function(){c("Berhasil mengembalikan buku",{appearance:"success"})}))}})),r.a.createElement(V.a,null,r.a.createElement(Q.a,{color:"secondary",onClick:function(){var a;a=e.id_peminjaman,window.confirm("Hapus peminjaman?")&&t.deletePeminjamanRecord(a,(function(){c("Berhasil menghapus peminjaman",{appearance:"info"})}))}})))))})))))))}))),fe=t(164),ge=t(170),Ee=t(165),he=t(166),je=t(171),Oe=t(167);function ke(e){var a=e.children,t=e.value,n=e.index;return console.log(t),r.a.createElement(fe.a,{component:"span",role:"tabpanel",hidden:t!==n,id:"simple-tabpanel-".concat(n)},r.a.createElement(ge.a,null,t===n&&a))}var ve=function(e){var a=Object(n.useState)(0),t=Object(u.a)(a,2),c=t[0],l=t[1];return r.a.createElement(w.a,{store:I},r.a.createElement(ee.ToastProvider,{autoDismiss:!0},r.a.createElement(Ee.a,{maxWidth:"lg"},r.a.createElement(he.a,{position:"static"},r.a.createElement(je.a,{value:c,"aria-label":"simple tabs example",onChange:function(e,a){l(a)}},r.a.createElement(Oe.a,{label:"Member"}),r.a.createElement(Oe.a,{label:"Buku"}),r.a.createElement(Oe.a,{label:"Peminjaman"}))),r.a.createElement(ke,{value:c,index:0},r.a.createElement(ce,null)),r.a.createElement(ke,{value:c,index:1},r.a.createElement(se,null)),r.a.createElement(ke,{value:c,index:2},r.a.createElement(pe,null)))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(ve,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},90:function(e,a,t){e.exports=t(123)},95:function(e,a,t){},96:function(e,a,t){}},[[90,1,2]]]);
//# sourceMappingURL=main.c84c7bd7.chunk.js.map