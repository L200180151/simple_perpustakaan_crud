(this["webpackJsonpperpustakaan-crud"]=this["webpackJsonpperpustakaan-crud"]||[]).push([[0],{123:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),c=t(8),u=t.n(c),l=(t(95),t(25)),i=(t(96),t(32)),o=t(74),m=t(26),s=t(7),d=t(23),p=t.n(d),b=function(e){var a="https://l200180151-perpustakaan-api.herokuapp.com/"+e;return{fetchall:function(){return p.a.get(a)},create:function(e){return p.a.post("".concat(a,"/add"),e)},update:function(e,t){return p.a.put("".concat(a,"/update?id=").concat(e),t)},delete:function(e){return p.a.delete("".concat(a,"/delete?id=").concat(e))}}},f="MEMBER_CREATE",E="MEMBER_UPDATE",h="MEMBER_DELETE",g="MEMBER_FETCH_ALL",j={list:[]},O="BUKU_CREATE",v="BUKU_UPDATE",k="BUKU_DELETE",y="BUKU_FETCH_ALL",_={list:[]},T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"https://l200180151-perpustakaan-api.herokuapp.com/peminjaman";return{fetchall:function(){return p.a.get(e)},create:function(a){return p.a.post("".concat(e,"/add?id=").concat(a))},update:function(a){return p.a.put("".concat(e,"/update?id=").concat(a))},delete:function(a){return p.a.delete("".concat(e,"/delete?id=").concat(a))}}},M="PEMINJAMAN_CREATE",C="PEMINJAMAN_UPDATE",B="PEMINJAMAN_DELETE",N="PEMINJAMAN_FETCH_ALL",R={list:[]},x=Object(i.c)({membersRequest:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(a.type){case g:return Object(s.a)(Object(s.a)({},e),{},{list:Object(m.a)(a.payload)});case f:return Object(s.a)(Object(s.a)({},e),{},{list:[].concat(Object(m.a)(e.list),[a.payload])});case E:return Object(s.a)(Object(s.a)({},e),{},{list:e.list.map((function(e){return e.id_member===a.payload.id_member?a.payload:e}))});case h:return Object(s.a)(Object(s.a)({},e),{},{list:e.list.filter((function(e){return e.id_member!==a.payload}))});default:return e}},bukuRequest:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(a.type){case y:return Object(s.a)(Object(s.a)({},e),{},{list:Object(m.a)(a.payload)});case O:return Object(s.a)(Object(s.a)({},e),{},{list:[].concat(Object(m.a)(e.list),[a.payload])});case v:return Object(s.a)(Object(s.a)({},e),{},{list:e.list.map((function(e){return e.id_buku===a.payload.id_buku?a.payload:e}))});case k:return Object(s.a)(Object(s.a)({},e),{},{list:e.list.filter((function(e){return e.id_buku!==a.payload}))});default:return e}},peminjamanRequest:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(a.type){case N:return Object(s.a)(Object(s.a)({},e),{},{list:Object(m.a)(a.payload)});case M:return Object(s.a)(Object(s.a)({},e),{},{list:[].concat(Object(m.a)(e.list),[a.payload])});case C:return Object(s.a)(Object(s.a)({},e),{},{list:e.list.map((function(e){return e.id_peminjaman===a.payload.id_peminjaman?a.payload:e}))});case B:return Object(s.a)(Object(s.a)({},e),{},{list:e.list.filter((function(e){return e.id_peminjaman!==a.payload}))});default:return e}}}),P=Object(i.e)(x,Object(i.d)(Object(i.a)(o.a))),w=t(20),A=t(22),I=t(125),L=t(151),S=t(154),U=t(155),D=t(156),W=t(171),q=t(157),F=t(158),H=t(126),J=t(4),K=t(159),V=t(160),G=t(167),z=t(51),$=function(e,a,t){var r=Object(n.useState)(e),c=Object(l.a)(r,2),u=c[0],i=c[1],o=Object(n.useState)({}),m=Object(l.a)(o,2),d=m[0],p=m[1];return{values:u,setValues:i,handleInputChange:function(e){var t=e.target,n=t.name,r=t.value,c=Object(z.a)({},n,r);i(Object(s.a)(Object(s.a)({},u),c)),a(c)},errors:d,setErrors:p,resetForm:function(){i(Object(s.a)({},e)),p({}),t(0)}}},Q=t(19),X={nama:"",alamat:"",no_hp:""},Y={createNewMember:function(e,a,t){return function(n){b("member").create(e).then((function(e){n({type:f,payload:e.data}),a()})).catch((function(e){return t()}))}},updateMemberRecord:function(e,a,t,n){return function(r){b("member").update(e,a).then((function(n){r({type:E,payload:Object(s.a)({id_member:e},a)}),t()})).catch((function(e){return n()}))}}},Z=Object(w.b)((function(e){return{membersList:e.membersRequest.list}}),Y)(Object(J.a)((function(e){return{root:{"& .MuiTextField-root":{marginBottom:e.spacing(3),marginRight:e.spacing(3)}},buttonMargin:{margin:e.spacing(1)}}}))((function(e){var a=e.classes,t=Object(A.a)(e,["classes"]),c=Object(Q.useToasts)().addToast,u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,a=Object(s.a)({},d);if("nama"in e&&(a.nama=e.nama?"":"Tidak boleh kosong"),"alamat"in e&&(a.alamat=e.alamat?"":"Tidak boleh kosong"),"no_hp"in e&&(a.no_hp=e.no_hp?"":"Tidak boleh kosong"),p(Object(s.a)({},a)),e===i)return Object.values(a).every((function(e){return""===e}))},l=$(X,u,t.setCurrentId),i=l.values,o=l.setValues,m=l.handleInputChange,d=l.errors,p=l.setErrors,b=l.resetForm;return Object(n.useEffect)((function(){0!==t.currentId&&(o(Object(s.a)({},t.membersList.find((function(e){return e.id_member===t.currentId})))),p({}))}),[t.currentId]),r.a.createElement("form",{autoComplete:"off",noValidate:!0,className:a.root,onSubmit:function(e){e.preventDefault(),u()&&(0===t.currentId?t.createNewMember(i,(function(){b(),c("Berhasil membuat member baru",{appearance:"success"})}),(function(){c("Gagal membuat member baru",{appearance:"error"})})):t.updateMemberRecord(t.currentId,i,(function(){b(),c("Berhasil mengupdate member",{appearance:"success"})}),(function(){c("Gagal mengupdate member",{appearance:"error"})})))}},r.a.createElement(L.a,{container:!0},r.a.createElement(L.a,{item:!0,xs:12},r.a.createElement(G.a,Object.assign({name:"nama",variant:"outlined",label:"Nama",value:i.nama,onChange:m,fullWidth:!0,inputProps:{maxLength:45}},d.nama&&{error:!0,helperText:d.nama})),r.a.createElement(G.a,Object.assign({name:"alamat",variant:"outlined",label:"Alamat",value:i.alamat,onChange:m,fullWidth:!0,inputProps:{maxLength:45}},d.alamat&&{error:!0,helperText:d.alamat})),r.a.createElement(G.a,Object.assign({name:"no_hp",variant:"outlined",label:"No HP",type:"number",value:i.no_hp,onChange:m,fullWidth:!0,inputProps:{maxLength:12}},d.no_hp&&{error:!0,helperText:d.no_hp})),r.a.createElement("div",null,r.a.createElement(H.a,{variant:"contained",color:"primary",type:"submit",className:a.buttonMargin},"Submit"),r.a.createElement(H.a,{variant:"contained",className:a.buttonMargin,onClick:b},"Reset")))))}))),ee={fetchAllMembers:function(){return function(e){b("member").fetchall().then((function(a){e({type:g,payload:a.data})})).catch((function(e){return console.log(e)}))}},deleteMemberRecord:function(e,a){return function(t){b("member").delete(e).then((function(n){t({type:h,payload:e}),a()})).catch((function(e){return console.log(e)}))}}},ae=Object(w.b)((function(e){return{membersList:e.membersRequest.list}}),ee)(Object(J.a)((function(e){return{root:{"& .MuiTableCell-head":{fontSize:"1.25rem"}},paper:{margin:e.spacing(4),padding:e.spacing(4)}}}))((function(e){var a=e.classes,t=Object(A.a)(e,["classes"]),c=Object(Q.useToasts)().addToast,u=Object(n.useState)(0),i=Object(l.a)(u,2),o=i[0],m=i[1];Object(n.useEffect)((function(){t.fetchAllMembers()}),[]);return r.a.createElement(I.a,{className:a.paper,elevation:3},r.a.createElement(L.a,{container:!0},r.a.createElement(L.a,{item:!0,xs:6},r.a.createElement(Z,{currentId:o,setCurrentId:m})),r.a.createElement(L.a,{item:!0,xs:6},r.a.createElement(S.a,null,r.a.createElement(U.a,{className:a.root},r.a.createElement(D.a,null,r.a.createElement(W.a,null,"Nama"),r.a.createElement(W.a,null,"Alamat"),r.a.createElement(W.a,null,"No HP"),r.a.createElement(W.a,null))),r.a.createElement(q.a,null,t.membersList.map((function(e){return r.a.createElement(D.a,{key:e.id_member,hover:!0},r.a.createElement(W.a,null,e.nama),r.a.createElement(W.a,null,e.alamat),r.a.createElement(W.a,null,e.no_hp),r.a.createElement(W.a,null,r.a.createElement(F.a,{variant:"text"},r.a.createElement(H.a,null,r.a.createElement(K.a,{color:"primary",onClick:function(){m(e.id_member)}})),r.a.createElement(H.a,null,r.a.createElement(V.a,{color:"secondary",onClick:function(){var a;a=e.id_member,window.confirm("Hapus member?")&&t.deleteMemberRecord(a,(function(){c("Berhasil menghapus member",{appearance:"info"})}))}})))))})))))))}))),te={judul:"",pengarang:"",tahun_terbit:""},ne={createNewBuku:function(e,a,t){return function(n){b("buku").create(e).then((function(e){n({type:O,payload:e.data}),a()})).catch((function(e){return t()}))}},updateBukuRecord:function(e,a,t,n){return function(r){b("buku").update(e,a).then((function(n){r({type:v,payload:Object(s.a)({id_buku:e},a)}),t()})).catch((function(e){return n()}))}}},re=Object(w.b)((function(e){return{bukuList:e.bukuRequest.list}}),ne)(Object(J.a)((function(e){return{root:{"& .MuiTextField-root":{marginBottom:e.spacing(3),marginRight:e.spacing(3)}},buttonMargin:{margin:e.spacing(1)}}}))((function(e){var a=e.classes,t=Object(A.a)(e,["classes"]),c=Object(Q.useToasts)().addToast,u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,a=Object(s.a)({},d);if("judul"in e&&(a.judul=e.judul?"":"Tidak boleh kosong"),"pengarang"in e&&(a.pengarang=e.pengarang?"":"Tidak boleh kosong"),"tahun_terbit"in e&&(a.tahun_terbit=e.tahun_terbit?"":"Tidak boleh kosong"),p(Object(s.a)({},a)),e===i)return Object.values(a).every((function(e){return""===e}))},l=$(te,u,t.setCurrentId),i=l.values,o=l.setValues,m=l.handleInputChange,d=l.errors,p=l.setErrors,b=l.resetForm;return Object(n.useEffect)((function(){0!==t.currentId&&(o(Object(s.a)({},t.bukuList.find((function(e){return e.id_buku===t.currentId})))),p({}))}),[t.currentId]),r.a.createElement("form",{autoComplete:"off",noValidate:!0,className:a.root,onSubmit:function(e){e.preventDefault(),u()&&(0===t.currentId?t.createNewBuku(i,(function(){b(),c("Berhasil membuat buku baru",{appearance:"success"})}),(function(){c("Gagal membuat buku baru",{appearance:"error"})})):t.updateBukuRecord(t.currentId,i,(function(){b(),c("Berhasil mengupdate buku",{appearance:"success"})}),(function(){c("Gagal mengupdate buku",{appearance:"error"})})))}},r.a.createElement(L.a,{container:!0},r.a.createElement(L.a,{item:!0,xs:12},r.a.createElement(G.a,Object.assign({name:"judul",variant:"outlined",label:"Judul",value:i.judul,onChange:m,fullWidth:!0,inputProps:{maxLength:45}},d.judul&&{error:!0,helperText:d.judul})),r.a.createElement(G.a,Object.assign({name:"pengarang",variant:"outlined",label:"Pengarang",value:i.pengarang,onChange:m,fullWidth:!0,inputProps:{maxLength:45}},d.pengarang&&{error:!0,helperText:d.pengarang})),r.a.createElement(G.a,Object.assign({name:"tahun_terbit",variant:"outlined",label:"Tahun Terbit",type:"number",value:i.tahun_terbit,onChange:m,fullWidth:!0},d.tahun_terbit&&{error:!0,helperText:d.tahun_terbit})),r.a.createElement("div",null,r.a.createElement(H.a,{variant:"contained",color:"primary",type:"submit",className:a.buttonMargin},"Submit"),r.a.createElement(H.a,{variant:"contained",className:a.buttonMargin,onClick:b},"Reset")))))}))),ce=t(161),ue={fetchAllBuku:function(){return function(e){b("buku").fetchall().then((function(a){e({type:y,payload:a.data})})).catch((function(e){return console.log(e)}))}},deleteBukuRecord:function(e,a){return function(t){b("buku").delete(e).then((function(n){t({type:k,payload:e}),a()})).catch((function(e){return console.log(e)}))}},createNewPeminjaman:function(e,a){return function(t){T().create(e).then((function(e){t({type:M,payload:e.data}),a()})).catch((function(e){return console.log(e)}))}}},le=Object(w.b)((function(e){return{bukuList:e.bukuRequest.list}}),ue)(Object(J.a)((function(e){return{root:{"& .MuiTableCell-head":{fontSize:"1.25rem"}},paper:{margin:e.spacing(4),padding:e.spacing(4)}}}))((function(e){var a=e.classes,t=Object(A.a)(e,["classes"]),c=Object(Q.useToasts)().addToast,u=Object(n.useState)(0),i=Object(l.a)(u,2),o=i[0],m=i[1];Object(n.useEffect)((function(){t.fetchAllBuku()}),[]);return r.a.createElement(I.a,{className:a.paper,elevation:3},r.a.createElement(L.a,{container:!0},r.a.createElement(L.a,{item:!0,xs:6},r.a.createElement(re,{currentId:o,setCurrentId:m})),r.a.createElement(L.a,{item:!0,xs:6},r.a.createElement(S.a,null,r.a.createElement(U.a,{className:a.root},r.a.createElement(D.a,null,r.a.createElement(W.a,null,"Judul"),r.a.createElement(W.a,null,"Pengarang"),r.a.createElement(W.a,null,"Tahun Terbit"),r.a.createElement(W.a,null))),r.a.createElement(q.a,null,t.bukuList.map((function(e){return r.a.createElement(D.a,{key:e.id_buku,hover:!0},r.a.createElement(W.a,null,e.judul),r.a.createElement(W.a,null,e.pengarang),r.a.createElement(W.a,null,e.tahun_terbit),r.a.createElement(W.a,null,r.a.createElement(F.a,{variant:"text"},r.a.createElement(H.a,null,r.a.createElement(ce.a,{color:"action",onClick:function(){var a;a=e.id_buku,window.confirm("pinjam buku?")&&t.createNewPeminjaman(a,(function(){c("Berhasil meminjam buku",{appearance:"success"})}))}})),r.a.createElement(H.a,null,r.a.createElement(K.a,{color:"primary",onClick:function(){m(e.id_buku)}})),r.a.createElement(H.a,null,r.a.createElement(V.a,{color:"secondary",onClick:function(){var a;a=e.id_buku,window.confirm("Hapus buku?")&&t.deleteBukuRecord(a,(function(){c("Berhasil menghapus buku",{appearance:"info"})}))}})))))})))))))}))),ie=t(162),oe={fetchAllPeminjaman:function(){return function(e){T().fetchall().then((function(a){e({type:N,payload:a.data})})).catch((function(e){return console.log(e)}))}},deletePeminjamanRecord:function(e,a){return function(t){T().delete(e).then((function(n){t({type:B,payload:e}),a()})).catch((function(e){return console.log(e)}))}},updatePeminjamanRecord:function(e,a){return function(t){T().update(e).then((function(e){t({type:C,payload:e.data}),a()})).catch((function(e){return console.log(e)}))}}},me=Object(w.b)((function(e){return{peminjamanList:e.peminjamanRequest.list}}),oe)(Object(J.a)((function(e){return{root:{"& .MuiTableCell-head":{fontSize:"1.25rem"}},paper:{margin:e.spacing(4),padding:e.spacing(4)}}}))((function(e){var a=e.classes,t=Object(A.a)(e,["classes"]),c=Object(Q.useToasts)().addToast;Object(n.useEffect)((function(){t.fetchAllPeminjaman()}),[]);return r.a.createElement(I.a,{className:a.paper,elevation:3},r.a.createElement(L.a,{container:!0},r.a.createElement(L.a,{item:!0,lg:12},r.a.createElement(S.a,null,r.a.createElement(U.a,{className:a.root},r.a.createElement(D.a,null,r.a.createElement(W.a,null,"Nama Peminjam"),r.a.createElement(W.a,null,"Buku"),r.a.createElement(W.a,null,"Tanggal Peminjaman"),r.a.createElement(W.a,null,"Tanggal Pengembalian"),r.a.createElement(W.a,null))),r.a.createElement(q.a,null,t.peminjamanList.map((function(e){return r.a.createElement(D.a,{key:e.id_peminjaman,hover:!0},r.a.createElement(W.a,null,e.nama),r.a.createElement(W.a,null,e.judul),r.a.createElement(W.a,null,e.tanggal_peminjaman),r.a.createElement(W.a,null,null===e.tanggal_pengembalian?"Belum dikembalikan":e.tanggal_pengembalian),r.a.createElement(W.a,null,r.a.createElement(F.a,{variant:"text"},r.a.createElement(H.a,null,r.a.createElement(ie.a,{color:"primary",onClick:function(){var a;a=e.id_peminjaman,window.confirm("Kembalikan buku?")&&t.updatePeminjamanRecord(a,(function(){c("Berhasil mengembalikan buku",{appearance:"success"})}))}})),r.a.createElement(H.a,null,r.a.createElement(V.a,{color:"secondary",onClick:function(){var a;a=e.id_peminjaman,window.confirm("Hapus peminjaman?")&&t.deletePeminjamanRecord(a,(function(){c("Berhasil menghapus peminjaman",{appearance:"info"})}))}})))))})))))))}))),se=t(163),de=t(169),pe=t(164),be=t(165),fe=t(170),Ee=t(166);function he(e){var a=e.children,t=e.value,n=e.index;return console.log(t),r.a.createElement(se.a,{component:"span",role:"tabpanel",hidden:t!==n,id:"simple-tabpanel-".concat(n)},r.a.createElement(de.a,null,t===n&&a))}var ge=function(e){var a=Object(n.useState)(0),t=Object(l.a)(a,2),c=t[0],u=t[1];return r.a.createElement(w.a,{store:P},r.a.createElement(Q.ToastProvider,{autoDismiss:!0},r.a.createElement(pe.a,{maxWidth:"lg"},r.a.createElement(be.a,{position:"static"},r.a.createElement(fe.a,{value:c,"aria-label":"simple tabs example",onChange:function(e,a){u(a)}},r.a.createElement(Ee.a,{label:"Member"}),r.a.createElement(Ee.a,{label:"Buku"}),r.a.createElement(Ee.a,{label:"Peminjaman"}))),r.a.createElement(he,{value:c,index:0},r.a.createElement(ae,null)),r.a.createElement(he,{value:c,index:1},r.a.createElement(le,null)),r.a.createElement(he,{value:c,index:2},r.a.createElement(me,null)))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));u.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(ge,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},90:function(e,a,t){e.exports=t(123)},95:function(e,a,t){},96:function(e,a,t){}},[[90,1,2]]]);
//# sourceMappingURL=main.a09a811a.chunk.js.map